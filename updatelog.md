# 更新日志

## 样式更新 (Style Updates)

### 2024-01-xx Footer样式优化
#### 布局与视觉优化
- 重新设计 Footer 整体布局和视觉风格
- 添加背景色和边框以提升层次感
- 优化响应式布局，使用 grid 系统
- 改进图标显示和交互效果

#### 交互体验提升
- 添加链接悬停动画效果
- 优化社交图标的显示方式
- 改进链接的视觉反馈
- 统一中英文显示风格

### 2024-01-xx 分类配色系统优化
#### 颜色系统增强
- 重新设计分类颜色方案，提高辨识度和主题关联性
- 使用 rgba 颜色格式，统一透明度为 0.15
- 为每个分类添加对应的文字颜色变量
- 优化深色模式下的显示效果

#### 分类配色详情
- ComfyUI: 紫色系，代表 AI 和创新
- Reading: 粉色系，代表文学和阅读
- Travel: 绿色系，代表自然和旅行
- Food: 金色系，代表美食
- Research: 蓝色系，代表研究和科技
- Coding: 红色系，代表编程和技术
- Default: 中性灰色，用作默认值

#### 组件适配
- 更新 Card 组件以支持新的文字颜色变量
- 优化分类标签的边框和文字颜色
- 增强了颜色对比度和可读性
- 改进了调试信息的输出

### 2024-01-xx 分类样式系统调试与优化
#### 分类颜色变量系统修复
- 修正 CSS 变量定义方式，从对象格式改为直接变量定义
- 将分类颜色变量改为 `--category-{slug}` 格式
- 示例：`--category-comfyui: #ffe8cc64`
- 保留 `--category-default` 作为颜色
- 修复分类 slug 大小写敏感问题，统一使用小写形式匹配 CSS 变量
- 添加变量回退机制，确保始终有默认颜色

#### 调试功能增强
- 在 CategoriesList 组件中添加详细的调试日志
- 输出已加载的分类信息
- 记录每个分类的原始 slug 和标准化后的 slug
- 记录对应的颜色变量
- 便于在浏览器开发工具中追踪样式应用情况

### 2024-01-xx 分类样式系统优化
#### 全局样式系统重构
- 在 :root 中统一管理主题相关的颜色变量
- 优化变量命名规范，提高代码可读性
- 添加暗色/亮色题变量支持

#### CategoriesList 组件样式优化
- 移除硬编码的分类样式类
- 使用动态样式生成替代静态类名
- 添加平滑的悬停动画效果
- 优化分类项的样式结构

### 2024-01-xx 响应式布局优化
#### CategoriesList 组件样式优化
- 添加响应式布局支持，适配不同屏幕尺寸
- 1280px 以下：类别项宽度调为 30%，每行显示 3 个
- 1024px 以下：类别项宽度调整为 45%，每行显示 2 个
- 768px 以下：减小间距和文字大小
- 640px 以下：改为单列布局，优化移动端显示

#### 全局样式优化
- 修复小屏幕（<475px）下暗色模式背景色显示问题
- 优化 wrapper 类的响应式布局
- 改 width: 100% 和 max-width 的组合来控制布局
- 化不同屏幕尺寸下的内边距
- 添加 475px 断点的特殊处理

### 2024-01-xx MenuCategories组件样式优化
#### 样式系统统一
- 将 MenuCategories 组件的样式系统与 CategoriesList 保持一致
- 使用全局 CSS 变量控制分类颜色
- 移除硬编码的分类样式类
- 优化暗色主题适配

#### 组件样式增强
- 使用动态样式生成替代静态类名
- 改进颜色继承和透明度控制
- 优化hover效果和过渡动画
- 统一使用主题变量进行样式控制

### 2024-01-xx MenuPost组件样式优化
#### 样式系统统一
- 将 MenuPost 组件的样式系统与其他组件保持一致
- 使用全局 CSS 变量控制分类颜色
- 移除硬编码的分类样式类
- 优化暗色主题适配

#### 组件样式增强
- 使用动态样式生成替代静态类名
- 添加分类标签的边框和透明度效果
- 改进颜色继承和过渡动画
- 统一使用主题变量进行样式控制
- 增强调试功能，添加详细日志输出

### 2024-01-xx Card组件样式优化
#### 样式系统统一
- 将 Card 组件的样式系统与其他组件保持一致
- 使用全局 CSS 变量控制主题颜色
- 优化分类标签样式
- 增强暗色主题适配

#### 组件样式增强
- 使用动态样式生成替代静态颜色值
- 添加图片容器悬停效果
- 统一使用主题变量进行样式控制
- 优化链接和交互效果
- 增强调试功能，添加详细日志输出

### 2024-01-xx 导航栏图标主题适配优化
#### 双主题图标实现
- 为每个图标准备亮色和暗色两个版本
- 根据当前主题自动切换对应版本的图标
- 添加图标悬停效果和平滑过渡
- 优化图标在不同主题下的可见度

#### 技术实现
- 使用 next-themes 获取当前主题状态
- 实现图标配置对象统一管理两套图标
- 添加服务端渲染兼容处理
- 优化图标加载和切换逻辑

### 2024-01-xx Markdown 样式系统实现
#### 样式优化
- 实现响应式的文章排版系统
- 优化标题层级的间距和字体大小
- 美化引用块和代码块样式
- 统一使用主题变量控制颜色
- 优化列表和表格的显示效果
- 改进图片显示和响应式适配
- 添加 Fira Code 等宽字体支持

## API 路由更新 (API Route Updates)

### 模板
#### yyyy-MM-dd 更新描述
- 更新内容1
- 更新内容2

## JSX 组件更新 (Component Updates)

### 模板
#### yyyy-MM-dd 更新描述
- 更新内容1
- 更新内容2

## 数据库更新 (Database Updates)

### 2024-01-xx 分类命名规范化
#### 分类 slug 标准化
- 将所有分类的 slug 统一改为小写格式
- 采用 URL 友好的命名规范
- 确保与样式系统的命名保持一致
- 示例：'ComfyUI' -> 'comfyui'

#### 命名规范说明
- slug 必须使用小写字母
- 避免使用特殊字符和空格
- 多个单词之间可以使用连字符（-）连接
- 保持简短且具有描述性

### 2024-01-xx 书签系统数据库迁移
#### 新增数据模型
- 添加 BookmarkCategory 模型
- 添加 Bookmark 模型
- 建立模型间的关联关系：
  - Bookmark 与 BookmarkCategory 的一对多关系
  - Bookmark 与 Tag 的多对多关系

#### 初始数据
- 添加基础书签分类
- 创建示例书签数据
- 建立标签关联

### 2024-01-xx 文章编辑器和渲染系统升级
#### 编辑器功能增强
- 将 ReactQuill 编辑器从 bubble 主题升级到功能更强大的 snow 主题
- 添加更多文本格式化选项：
  - 六级标题支持
  - 文本颜色和背景色
  - 文本对齐方式
  - 有序和无序列表
  - 上标和下标
  - 引用块和代码块
  - 图片和视频嵌入
- 启用代码语法高亮功能
- 优化剪贴板处理逻辑

#### Markdown 渲染系统实现
- 集成 react-markdown 用于文章内容渲染
- 添加 GFM (GitHub Flavored Markdown) 支持
- 实现代码块语法高亮
- 支持 HTML 内容渲染
- 优化文章排版样式：
  - 标题层级样式优化
  - 引用块样式美化
  - 代码块格式化
  - 列表样式优化
  - 表格样式美化
  - 图片显示优化

## 功能更新 (Feature Updates)

### 模板
#### yyyy-MM-dd 更新描述
- 更新内容1
- 更新内容2

### 2024-01-xx 文章编辑功能统一化
#### 编辑器功能同步
- 统一新建和编辑文章页面的编辑器功能
- 在编辑页面添加完整的格式化工具
- 同步代码高亮支持
- 保持编辑体验的一致性

### 2024-01-xx Markdown渲染组件重构
#### 组件拆分与优化
- 创建独立的 MarkdownContent 客户端组件
- 将 Markdown 渲染逻辑从页面组件中分离
- 解决服务器端渲染兼容性问题
- 优化错误处理和加载状态

#### 技术实现
- 使用 PrismLight 替代 Prism 以优化性能
- 采用 CJS 版本的样式导入以解决 ESM 兼容性问题
- 实现代码高亮和 Markdown 扩展功能
- 添加误边界处理

#### 样式优化
- 实现独立的 markdownContent.module.css
- 优化代码块显示效果
- 添加响应式布局支持
- 完善暗色主题适配
- 增强文章排版的可读性
- 优化链接和强调文本的显示效果

### 2024-01-xx 书签添加功能
#### 新增组件
- 添加 AddBookmark 模态框组件
- 实现书签表单提交功能
- 支持标签的动态添加和删除
- 添加实时验证和错误处理

#### 交互优化
- 添加加载状态反馈
- 优化表单布局和样式
- 实现响应式设计
- 添加动画效果

### 2024-01-xx 书签功能优化
#### 图片处理优化
- 添加图片压缩功能
- 限制图片最大尺寸
- 优化图片质量
- 改进数据库存储方式
- 增加图片大小限制
- 优化压缩算法
- 使用 LongText 类型存储
- 修复图片预览问题
- 优化图片处理流程

#### 图片上传体验优化
- 优化剪贴板粘贴功能提示
- 添加键盘快捷键说明
- 增加操作成功反馈
- 改进交互体验

#### 简化书签添加流程
- 移除自动元数据获取功能
- 改为完全手动输入模式
- 简化用户界面
- 提高系统稳定性

## 依赖更新 (Dependency Updates)

### 2024-01-xx 包管理器切换
#### 从 Yarn 切换到 NPM
- 由于 Windows 系统下 Yarn 安装依赖遇到权限问题
- 移除 yarn.lock 文件
- 使用 npm 重新安装依赖
- 成功安装 next-themes 包

### 2024-01-xx 主题管理系统升级
#### 新增依赖
- 添加 next-themes 包用于主题管理
- 版本: latest
- 用途: 提供更强大的主题切换和管理功能

#### 配置更新
- 将自定义 ThemeProvider 更新为使用 next-themes
- 配置默认使用系统主题
- 启用系统主题跟踪
- 使用 class 属性进行主题切换

### 2024-01-xx Markdown 相关依赖添加
#### 新增依赖
- react-markdown: Markdown 渲染核心
- react-syntax-highlighter: 代码语法高亮
- remark-gfm: GitHub Flavored Markdown 支持
- rehype-raw: HTML 内容渲染支持
- highlight.js: 代码高亮样式支持

## 组件更新 (Component Updates)

### 2024-01-xx 主题系统迁移
#### ThemeToggle 组件更新
- 从自定义 ThemeContext 迁移到 next-themes
- 添加服务端渲染兼容处理
- 优化主题切换逻辑
- 保持现有的 UI 和交互效果

#### Layout 组件优化
- 移除旧的 ThemeContextProvider
- 添加 suppressHydrationWarning 属性
- 简化主题提供者结构
- 保持其他功能不变

### 2024-01-xx ThemeProvider 组件重构
#### 功能更新
- 移除原有的主题上下文实现
- 集成 next-themes 提供的主题管理功能
- 简化组件实现，提高可维护性
- 保持与现有主题系统的兼容性

### 2024-01-xx Footer组件优化
#### 分类链接动态化
- 将硬编码的分类链接改为动态获取
- 添加分类数据获取和状态管理
- 优化分类链接的显示逻辑
- 确保与数据库分类保持同步

### 2024-01-xx 导航栏功能扩展
#### 新增功能
- 添加收藏夹(Collection)页面链接
- 优化导航栏布局以适应新增链接
- 改进响应式设计

#### 样式优化
- 调整导航栏最大宽度
- 优化移动端显示效果
- 改进链接间距和内边距

## 性能优化 (Performance Improvements)

### 模板
#### yyyy-MM-dd 更新描述
- 更新内容1
- 更新内容2

## 问题修复 (Bug Fixes)

### 2024-01-xx 元数据获取兼容性修复
#### 技术栈更新
- 将 fetch/https 替换为 node-fetch
- 改进错误处理机制
- 优化请求超时处理
- 添加详细的错误信息

#### 稳定性提升
- 增强网络请求可靠性
- 改进错误反馈机制
- 优化超时处理逻辑
- 添加请求中断控制
- 添加请求状态验证

### 2024-01-xx Collection页面路由修复
#### 路由问题修复
- 修正文件路径大小写问题
- 添加详细的调试日志
- 优化错误处理和加载状态
- 改进用户反馈机制

### 2024-01-xx ReactQuill 代码高亮问题修复
#### 编辑器语法高亮修复
- 修复 ReactQuill 语法高亮模块加载错误
- 添加 highlight.js 全局配置
- 优化代码编辑器初始化流程
- 确保 highlight.js 在编辑器加载前可用

## 文档更新 (Documentation Updates)

### 模板
#### yyyy-MM-dd 更新描述
- 更新内容1
- 更新内容2

---
注意：更新日志按照时间倒序排列，最新的更新在每个分类的最上方。

## API更新 (API Updates)

### 2024-01-xx 书签管理API
#### 新增API路由
- 添加书签分类管理API
- 添加书签CRUD操作API
- 支持按分类过滤和特色书签查询
- 完整的错误处理和响应

### 2024-01-xx 文章API优化

## 依赖管理 (Dependencies Management)

### 2024-01-xx 依赖清理优化
#### 移除冗余依赖
- 移除 undici 依赖
- 移除 axios 依赖
- 统一使用 node-fetch v2.6.7

#### 依赖管理优化
- 简化依赖结构
- 减少包体积
- 提高项目稳定性
- 解决版本冲突问题

### 2024-01-xx 元数据获取兼容性修复
#### 技术栈更新
- 将 fetch/https 替换为 node-fetch
